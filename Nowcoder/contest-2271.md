# 牛客挑战赛34

[官方题解](https://ac.nowcoder.com/discuss/346481?type=101&order=0&pos=1&page=1)

## A 能天使的愿望

动态规划， $f_i$ 表示购买 $i$ 把铳的最低花费。对于第 i 个店铺购买 k 把， $f_j = f_{j-k} + cost[i,k]$ ，可用滚动数组实现。注意最后滚动数组的last、cur输出哪个。以及开 long long

时间复杂度 $O(NMK)$，空间复杂度 $O(max⁡(M,K))$

## B 罗德岛裁员
经典的约瑟夫问题

$J(g) = 2x+1$ , 其中 $g=2^t +x$ , $2^t>x$ 且 $x \ge 0$

现有 $m = 2x+1 = J(2^t+x)$,所以枚举 $2^t$ ,$x = (m-1)/2$,判断是否符合上式即可。

## C 远山的占卜

对角的两个点是可以归为一个等价类的，即这两个点可以放在一起考虑，然后对于 n 对点分别考虑完之后再进行整体的旋转置换。

两个点放一起考虑，则相当于两个点有 $k(k+1)/2$ 种颜色数。变成普通的颜色数为 $k(k+1)/2$ 给 $n$ 个点染色，求染色的方案数，那么就可以上 $polya 定理$ 了。

$|G| = n$ ,第 $i$ 次旋转(初始状态算第一次旋转)，则有每个循环节长度为 $lcm(n,i)/i$ ，那么 $L(f)=n/(lcm(n,i)/i)$ ，即 $L(f)=gcd(n,i)$ 。
所以，$ans=\frac{1}{n} \sum _{f \in G} k^{gcd(n,i)}$ .

考虑到还有 T 组数据。需要优化。

**欧拉函数优化**。 $d_i = gcd[n,i]$ ,设有 $x$ 个 $gcd$ 是相等的，那么可以枚举 $n$ 的约数。对于第 $j$ 个约数 $p_j$ , $d = n/p_j$ 。 $x=\varphi [n/d]$ 。所以

$$
ans = \frac{1}{n} \sum _{p|n} \varphi (p) \times k^{\frac{n}{p}}
$$

于是求 $ans$ 只要 $O( \sqrt n)$ 了。

Tips: 欧拉函数 $\varphi$ 的几个性质
1. 对于质数 $p$ ，$\varphi(p)=p−1$ 
2. 若 $p$ 为质数， $n=p^k$ ，则 \varphi(n) = p^k - p^{k-1} = p^{k-1}(p-1)$
3. 欧拉函数是积性函数，但不是完全积性函数。若 $m$ , $n$ 互质，则 $\varphi (m∗n)=\varphi (m)∗ \varphi (n)$ 。特殊的，当 $m=2$，$n$ 为奇数时，\varphi (2*n)= \varphi (n)$ 。
4. 当 $n>2$ 时，$\varphi (n)$ 是偶数。
5. 小于 $n$ 的数中，与 $n$ 互质的数的总和为：$\varphi(n) * n / 2$ ( $n>1$ )。
6. $n=\Sigma _{d∣n} \varphi(d)$ ，即 $n$ 的因数（包括1和它自己）的欧拉函数之和等于n。


## D 拉普兰德的愿望

## E 银老板的游戏

## F 红的愿望
